(function(){var e={view:$("small.view-count"),like:$("small.like-count"),dislike:$("small.dislike-count"),fb_share:".fb-share",twitter_share:".twitter-share",paginate_body:".video-pagination",paginate_prev:".pager .previous a",paginate_next:".pager .next a",suggestion:"form#suggestion",error_handler:"div.error-handler",suggest_btn:"button.suggest-btn",modal_suggest:"#suggestVideo"};var t={remove_warning:function(){return this.delegate(e.modal_suggest,"hidden.bs.modal",function(){$(".submit-success").hide()})},suggestion:function(){return this.delegate(e.suggestion,"submit",function(t){t.preventDefault();var n=$(this),r=n.serialize();$(e.suggest_btn).html("<span class='fa fa-spinner fa-spin'></span> Processing").attr("disabled","disabled");$.ajax({url:config.base_url+"index/suggestion",type:"POST",data:r,success:function(t){if(t=="success"){$(e.suggestion)[0].reset();$(".submit-success").show()}else{$(e.error_handler).html(t)}$(e.suggest_btn).html("Submit").removeAttr("disabled","disabled")},error:function(){console.log("Failed to process your request!")}})})},get_details:function(){return this.delegate(config.doc,"ready",function(){var t=$(this),n=t.find(".youtube-id").data("id");$.ajax({url:config.base_url+"index/views/",type:"POST",data:{youtube_id:n,gagllery_csrf:config.cookie},success:function(t){var n=$.parseJSON(t);e.view.text(n.count);e.like.text(n.like);e.dislike.text(n.dislike)},error:function(){console.log("Failed to process your request!")}})})},get_videos:function(t){console.log("getter");$.ajax({url:t,type:"POST",data:{offset:e.offset,gagllery_csrf:config.cookie},success:function(t){$(e.paginate_body).html(t)},error:function(){console.log("Failed to process your request!")}})},paginate_next:function(){return this.delegate(e.paginate_next,"click",function(e){e.preventDefault();config.doc.get_videos($(this).attr("href"))})},paginate_prev:function(){return this.delegate(e.paginate_prev,"click",function(e){e.preventDefault();config.doc.get_videos($(this).attr("href"))})},fb_share:function(){return this.delegate(e.fb_share,"click",function(e){e.preventDefault();var t=$(this),n=t.attr("href"),r=t.attr("title");window.open(n+"&text="+r,"facebook-share-dialog","height=436, width=626, top="+($(window).height()/2-225)+", left="+$(window).width()/2+", toolbar=0, location=0, menubar=0, directories=0, scrollbars=0")})},twitter_share:function(){return this.delegate(e.twitter_share,"click",function(e){e.preventDefault();var t=$(this),n=t.attr("href"),r=t.attr("title");window.open(n+"&text="+r,"facebook-share-dialog","height=436, width=626, top="+($(window).height()/2-225)+", left="+$(window).width()/2+", toolbar=0, location=0, menubar=0, directories=0, scrollbars=0")})}};$.extend(config.doc,t);config.doc.fb_share();config.doc.suggestion();config.doc.get_details();config.doc.twitter_share();config.doc.paginate_next();config.doc.paginate_prev();config.doc.remove_warning()})(jQuery,window,document)